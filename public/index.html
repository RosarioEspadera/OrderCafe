<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Cache-Control" content="public, max-age=31536000">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <link rel="stylesheet" href="styles/main.css?v=2.0">
<script src="scripts/script.js?v=2.0"></script>
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script src="app.js"></script>

  <title>Rio's Cafe - Order Confirmation</title>
  
</head>
<body>
  <div id="app">
    <h1>Welcome to Rio's Cafe</h1>
    <p>Select your order:</p>
    <!-- Menu Items -->
    <!-- Menu Items -->
<div class="menu-buttons">
    <button type="button" onclick="addToOrder('Dessert', 3.00)" class="menu-button tooltip" data-title="Dessert">
        <img src="images/Dessert.jpg" alt="Dessert" class="menu-image">
        <div class="price">$3.00</div>
    </button>
    <button type="button" onclick="addToOrder('Cake', 4.00)" class="menu-button tooltip" data-title="Cake">
        <img src="images/Cake.jpg" alt="Cake" class="menu-image">
        <div class="price">$4.00</div>
    </button>
    <button type="button" onclick="addToOrder('IceCream', 3.50)" class="menu-button tooltip" data-title="IceCream">
        <img src="images/IceCream.jpg" alt="IceCream" class="menu-image">
        <div class="price">$3.50</div>
    </button>
</div>

<div class="menu-buttons">
    <button type="button" onclick="addToOrder('Coffee', 2.50)" class="menu-button tooltip" data-title="Coffee">
        <img src="images/Coffee.jpg" alt="Coffee" class="menu-image">
        <div class="price">$2.50</div>
    </button>
    <button type="button" onclick="addToOrder('Cappuccino', 3.50)" class="menu-button tooltip" data-title="Cappuccino">
        <img src="images/Cappuccino.jpg" alt="Cappuccino" class="menu-image">
        <div class="price">$3.50</div>
    </button>
    <button type="button" onclick="addToOrder('Mocha', 4.00)" class="menu-button tooltip" data-title="Mocha">
        <img src="images/Mocha.jpg" alt="Mocha" class="menu-image">
        <div class="price">$4.00</div>
    </button>
</div>

<div class="menu-buttons">
    <button type="button" onclick="addToOrder('Meal', 10.00)" class="menu-button tooltip" data-title="Meal">
        <img src="images/Meal.jpg" alt="Meal" class="menu-image">
        <div class="price">$10.00</div>
    </button>
    <button type="button" onclick="addToOrder('Sushi', 12.00)" class="menu-button tooltip" data-title="Sushi">
        <img src="images/Sushi.jpg" alt="Sushi" class="menu-image">
        <div class="price">$12.00</div>
    </button>
    <button type="button" onclick="addToOrder('Teriyaki', 8.50)" class="menu-button tooltip" data-title="Teriyaki">
        <img src="images/Teriyaki.jpg" alt="Teriyaki" class="menu-image">
        <div class="price">$8.50</div>
    </button>
</div>

<div class="menu-buttons">
    <button type="button" onclick="addToOrder('Juice', 2.00)" class="menu-button tooltip" data-title="Juice">
        <img src="images/Juice.jpg" alt="Juice" class="menu-image">
        <div class="price">$2.00</div>
    </button>
    <button type="button" onclick="addToOrder('Tea', 2.50)" class="menu-button tooltip" data-title="Tea">
        <img src="images/Tea.jpg" alt="Tea" class="menu-image">
        <div class="price">$2.50</div>
    </button>
    <button type="button" onclick="addToOrder('Beer', 5.00)" class="menu-button tooltip" data-title="Beer">
        <img src="images/Beer.jpg" alt="Beer" class="menu-image">
        <div class="price">$5.00</div>
    </button>
</div>
    <div id="orderSummary">
  <ul id="orderList"></ul>
</div>
    <div>Total: $<span id="orderTotal">0.00</span></div>

    <!-- Order Form -->
    <h2>Order Details</h2>
  <form id="order-form">
  <label for="name">Name:</label>
  <input 
    type="text" 
    id="name" 
    placeholder="Enter your name" 
    required 
    autocomplete="name">

  <label for="address">Address:</label>
  <input 
    type="text" 
    id="address" 
    placeholder="Enter your address" 
    required 
    autocomplete="street-address">

  <label for="time">Serving Time:</label>
  <input 
    type="time" 
    id="time" 
    required 
    autocomplete="off">
    <!-- For time-based inputs, it's common to disable autofill -->

  <label for="email">Email Address:</label>
  <input 
    type="email" 
    id="email" 
    placeholder="Enter your email address" 
    required 
    autocomplete="email">

  <button type="button" onclick="sendOrder()">Send Order</button>
</form>
<!-- Load EmailJS first -->
<script src="https://cdn.emailjs.com/dist/email.min.js"></script>

<!-- Initialize EmailJS -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    emailjs.init("AqvkFhQnxowOJda9J");
  });
</script>

<!-- Declare orders array globally -->
<script>
  const orders = [];

  // Function to add an item to the order
  function addToOrder(item, price) {
    orders.push({ name: item, price: price });
    updateOrderSummary();
    alert(`${item} ($${price.toFixed(2)}) added to your order!`);
  }

  // Function to calculate the total price of the order
  function calculateTotal() {
    return orders.reduce((total, order) => total + order.price, 0);
  }

  // Function to update the order summary display on the page
  function updateOrderSummary() {
    const orderListElem = document.getElementById("orderList");
    orderListElem.innerHTML = ""; // Clear current list

    orders.forEach(order => {
      const li = document.createElement("li");
      li.textContent = `${order.name} - $${order.price.toFixed(2)}`;
      orderListElem.appendChild(li);
    });

    // Ensure total price updates properly
    document.getElementById("orderTotal").innerText = calculateTotal().toFixed(2);
  }
</script>

<!-- Event Listeners for Menu Buttons -->
<script>
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".menu-button").forEach(button => {
      button.addEventListener("click", function() {
        const item = this.getAttribute("data-title");
        const price = parseFloat(this.querySelector(".price").textContent.replace("$", ""));
        addToOrder(item, price);
      });
    });
  });
</script>

<!-- Function to display order confirmation -->
<script>
  function displayConfirmation(details) {
    document.getElementById("confirmOrderDetails").innerText = details.orderDetails;
    document.getElementById("confirmOrders").innerText = details.orders;
    document.getElementById("confirmName").innerText = details.name;
    document.getElementById("confirmAddress").innerText = details.address;
    document.getElementById("confirmTime").innerText = details.time;
    document.getElementById("confirmEmail").innerText = details.email;
    document.getElementById("confirmTotalPrice").innerText = "$" + details.totalPrice;
    document.getElementById("orderConfirmationPreview").style.display = "block";
  }
</script>

<!-- Function to send the order via EmailJS -->
<script>
  function sendOrder() {
    if (orders.length === 0) {
      alert("No items in your order!");
      return;
    }

    const name = document.getElementById("name").value.trim();
    const address = document.getElementById("address").value.trim();
    const time = document.getElementById("time").value;
    const emailRecipient = document.getElementById("email").value.trim();

    if (!name || !address || !time || !emailRecipient) {
      alert("Please fill in all the details!");
      return;
    }

    const details = {
      orderDetails: "Your order has been received",
      orders: orders.map(order => `${order.name} ($${order.price.toFixed(2)})`).join(", "),
      name: name,
      address: address,
      time: time,
      email: emailRecipient,
      totalPrice: calculateTotal().toFixed(2)
    };

    emailjs.send("service_epydqmi", "template_vzuexod", details)
      .then(response => {
        console.log("SUCCESS!", response.status, response.text);
        alert("Order sent successfully!");
      })
      .catch(error => {
        console.error("EmailJS Error:", error);
        alert(`Failed to send order: ${error.text || "Unknown error"}`);
      });
  }
</script>


</body>
</html>


