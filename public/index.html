<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rio's Cafe - Order Confirmation</title>
  <link rel="stylesheet" href="styles/main.css" />
  <!-- Include EmailJS SDK v4 from jsDelivr CDN -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    emailjs.init("zBO_0fJf8CLgOs1Zj");
  });
</script>




  <style>
    /* Basic styling for the demo page */
    body {
      font-family: system-ui, sans-serif, Arial;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
#app {
  max-width: 700px;
  margin: auto;
  background-color: #caa689;
  background-size: contain; /* Ensures the full image is visible */
  background-repeat: no-repeat; /* Prevents the image from repeating */
  background-position: center; /* Centers the image */
  background-image: url('Cafelogo.png');
  padding: 20px;
  border-radius: 4px;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

    h1, h2 {
      text-align: center;
    }
    .menu-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .menu-image {
      width: 100px;
      height: auto;
    }
    .price {
      text-align: center;
      font-size: 0.9em;
      color: #555;
      margin-top: 5px;
    }
    form label {
      display: block;
      margin-top: 10px;
    }
    form input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      box-sizing: border-box;
    }
    #orderSummary {
      margin-top: 20px;
      padding: 10px;
      border: 1px solid #ccc;
    }
    #orderSummary ul {
      list-style-type: none;
      padding: 0;
    }
    /* Email template preview (for demonstration purposes) */
    #orderConfirmationPreview {
      display: none;
      margin-top: 20px;
      padding: 10px;
      border: 2px solid #458500;
      background-color: #e8f5e9;
    }
    #orderConfirmationPreview h3 {
      margin-top: 0;
    }
    body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #674736;
}

header {
    background-color: #4CAF50;
    color: white;
    padding: 15px;
    text-align: center;
}

nav {
    margin: 20px 0;
}

nav a {
    color: white;
    text-decoration: none;
    padding: 10px 15px;
}

nav a:hover {
    background-color: #45a049;
}

.main-content {
    padding: 20px;
}

footer {
    background-color: #333;
    color: white;
    text-align: center;
    padding: 10px;
    position: relative;
    bottom: 0;
    width: 100%;
}
.menu-buttons {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}
.menu-button:active {
    transform: scale(0.95);
    opacity: 0.8;
}
.menu-buttons button {
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border: none;
    color: rgb(156, 171, 90);
    border-radius: 5px;
    transition: background-color 0.3s;
}

.menu-buttons button:hover {
    background-color: #e68900;
}
.menu-image {
    width: 100px; /* Adjust width as needed */
    height: auto; /* Maintain aspect ratio */
}
.tooltip {
    position: relative;
    cursor: pointer;
}

.tooltip::after {
    content: attr(data-title);
    position: absolute;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 16px;
    white-space: nowrap;
    top: 110%;
    left: 50%;
    transform: translateX(-50%);
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
    pointer-events: none;
    z-index: 9999; /* Ensures it's on top */
}

.tooltip:hover::after {
    opacity: 1;
}
  </style>
</head>
<body>
  <div id="app">
    <h1>Welcome to Rio's Cafe</h1>
    <p>Select your order:</p>
    <!-- Menu Items -->
    <!-- Menu Items -->
<div class="menu-buttons">
    <button onclick="addToOrder('Dessert', 3.00)" class="menu-button tooltip" data-title="Dessert">
        <img src="images/Dessert.jpg" alt="Dessert" class="menu-image">
        <div class="price">$3.00</div>
    </button>
    <button onclick="addToOrder('Cake', 4.00)" class="menu-button tooltip" data-title="Cake">
        <img src="images/Cake.jpg" alt="Cake" class="menu-image">
        <div class="price">$4.00</div>
    </button>
    <button onclick="addToOrder('IceCream', 3.50)" class="menu-button tooltip" data-title="IceCream">
        <img src="images/IceCream.jpg" alt="IceCream" class="menu-image">
        <div class="price">$3.50</div>
    </button>
</div>

<div class="menu-buttons">
    <button onclick="addToOrder('Coffee', 2.50)" class="menu-button tooltip" data-title="Coffee">
        <img src="images/Coffee.jpg" alt="Coffee" class="menu-image">
        <div class="price">$2.50</div>
    </button>
    <button onclick="addToOrder('Cappuccino', 3.50)" class="menu-button tooltip" data-title="Cappuccino">
        <img src="images/Cappuccino.jpg" alt="Cappuccino" class="menu-image">
        <div class="price">$3.50</div>
    </button>
    <button onclick="addToOrder('Mocha', 4.00)" class="menu-button tooltip" data-title="Mocha">
        <img src="images/Mocha.jpg" alt="Mocha" class="menu-image">
        <div class="price">$4.00</div>
    </button>
</div>

<div class="menu-buttons">
    <button onclick="addToOrder('Meal', 10.00)" class="menu-button tooltip" data-title="Meal">
        <img src="images/Meal.jpg" alt="Meal" class="menu-image">
        <div class="price">$10.00</div>
    </button>
    <button onclick="addToOrder('Sushi', 12.00)" class="menu-button tooltip" data-title="Sushi">
        <img src="images/Sushi.jpg" alt="Sushi" class="menu-image">
        <div class="price">$12.00</div>
    </button>
    <button onclick="addToOrder('Teriyaki', 8.50)" class="menu-button tooltip" data-title="Teriyaki">
        <img src="images/Teriyaki.jpg" alt="Teriyaki" class="menu-image">
        <div class="price">$8.50</div>
    </button>
</div>

<div class="menu-buttons">
    <button onclick="addToOrder('Juice', 2.00)" class="menu-button tooltip" data-title="Juice">
        <img src="images/Juice.jpg" alt="Juice" class="menu-image">
        <div class="price">$2.00</div>
    </button>
    <button onclick="addToOrder('Tea', 2.50)" class="menu-button tooltip" data-title="Tea">
        <img src="images/Tea.jpg" alt="Tea" class="menu-image">
        <div class="price">$2.50</div>
    </button>
    <button onclick="addToOrder('Beer', 5.00)" class="menu-button tooltip" data-title="Beer">
        <img src="images/Beer.jpg" alt="Beer" class="menu-image">
        <div class="price">$5.00</div>
    </button>
</div>
    
    <!-- Order Form -->
    <h2>Order Details</h2>
    <form id="order-form">
      <label for="name">Name:</label>
      <input type="text" id="name" placeholder="Enter your name" required>

      <label for="address">Address:</label>
      <input type="text" id="address" placeholder="Enter your address" required>

      <label for="time">Serving Time:</label>
      <input type="time" id="time" required>

      <label for="email">Email Address:</label>
      <input type="email" id="email" placeholder="Enter your email address" required>

      <button type="button" onclick="sendOrder()">Send Order</button>
    </form>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
 
  (function() {
    emailjs.init("service_epydqmi"); // Your Service ID
  })();

  function sendOrder() {
    const templateParams = {
      name: document.getElementById("name").value,
      location: document.getElementById("location").value,
      time: document.getElementById("time").value,
      totalPrice: `$${totalPrice}`
    };

    emailjs.send("service_epydqmi", "template_vzuexod", templateParams)
      .then(response => {
        console.log("SUCCESS!", response.status, response.text);
        alert("Order sent successfully!");
      })
      .catch(error => {
        console.error("FAILED...", error);
        alert("Error sending order. Please try again.");
      });
  }
</script>

    <!-- Order Summary Display -->
    <div id="orderSummary">
      <h3>Your Current Order:</h3>
      <ul id="orderList"></ul>
      <p>Total Price: $<span id="orderTotal">0.00</span></p>
    </div>
    
    <!-- Confirmation Preview (for demonstration, mirroring EmailJS template placeholders) -->
    <div id="orderConfirmationPreview">
      <h3>Order Confirmation</h3>
      <p><strong>{{orderDetails}}:</strong> <span id="confirmOrderDetails"></span></p>
      <p><strong>Orders:</strong> <span id="confirmOrders"></span></p>
      <p><strong>Name:</strong> <span id="confirmName"></span></p>
      <p><strong>Address:</strong> <span id="confirmAddress"></span></p>
      <p><strong>Serving Time:</strong> <span id="confirmTime"></span></p>
      <p><strong>Email:</strong> <span id="confirmEmail"></span></p>
      <p><strong>Total Price:</strong> <span id="confirmTotalPrice"></span></p>
    </div>
  </div>
  
  <script>
    // Array to store order items
    const orders = [];
    
    // Function to add an item to the order
    function addToOrder(item, price) {
      orders.push({ name: item, price: price });
      updateOrderSummary();
      alert(`${item} ($${price.toFixed(2)}) added to your order!`);
    }
    
    // Function to calculate the total price of the order
    function calculateTotal() {
      return orders.reduce((total, order) => total + order.price, 0);
    }
    
    // Function to update the order summary display on the page
function updateOrderSummary() {
    const orderListElem = document.getElementById("orderList");
    orderListElem.innerHTML = ''; // Clear current list

    orders.forEach(order => {
        const li = document.createElement("li"); // Define the element
        li.textContent = `${order.name} - $${order.price.toFixed(2)}`;
        orderListElem.appendChild(li);
    });

    // Ensure total price updates properly
    document.getElementById("orderTotal").innerText = calculateTotal().toFixed(2);
}


    
    // Function to display a confirmation preview with dynamic placeholders
    function displayConfirmation(details) {
      document.getElementById('confirmOrderDetails').innerText = details.orderDetails;
      document.getElementById('confirmOrders').innerText = details.orders;
      document.getElementById('confirmName').innerText = details.name;
      document.getElementById('confirmAddress').innerText = details.address;
      document.getElementById('confirmTime').innerText = details.time;
      document.getElementById('confirmEmail').innerText = details.email;
      document.getElementById('confirmTotalPrice').innerText = "$" + details.totalPrice;
      document.getElementById('orderConfirmationPreview').style.display = 'block';
    }
    
    // Function to send the order details via EmailJS
    function sendOrder() {
      if (orders.length === 0) {
        alert("No items in your order!");
        return;
      }
      
      const name = document.getElementById("name").value.trim();
      const address = document.getElementById("address").value.trim();
      const time = document.getElementById("time").value;
      const emailRecipient = document.getElementById("email").value.trim();
      
      if (!name || !address || !time || !emailRecipient) {
        alert("Please fill in all the details!");
        return;
      }
      
      // Create a textual summary of the order items
      const ordersText = orders.map(order => `${order.name} ($${order.price.toFixed(2)})`).join(", ");
      
      // Custom order details message
      const orderDetailsMessage = "Your order has been received";
      
      // Calculate the total price
      const totalPriceValue = calculateTotal().toFixed(2); // e.g., "7.50" or whatever the sum is
const details = {
  orderDetails: "Your order has been received",
  orders: ordersText, // e.g., "Juice ($2.00), Beer ($5.00), Tea ($1.50), Teriyaki ($9.00)"
  name: name,
  address: address,
  time: time,
  email: emailRecipient,
  totalPrice: calculateTotal().toFixed(2) // This property must be sent as totalPrice
};
console.log(details); // Add this to check if totalPrice has a valid value.

      
      // Example: sending data using EmailJS. Replace SERVICE_ID and TEMPLATE_ID accordingly.
      emailjs.send("service_epydqmi", "template_vzuexod", details)
        .then(function(response) {
          console.log("SUCCESS!", response.status, response.text);
          alert("Order sent successfully!");
          // Optional: display a confirmation preview (for demonstration)
          displayConfirmation(details);
          // Clear the orders and form after sending
          orders.length = 0;
          document.getElementById("order-form").reset();
          updateOrderSummary();
        }, function(error) {
          console.error("FAILED...", error);
          alert("Failed to send order. Please try again later.");
        });
    }
  </script>
</body>
</html>


